{"dependencies":[{"name":"./batch","data":{"asyncType":null,"locs":[{"start":{"line":16,"column":18},"end":{"line":16,"column":33}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  exports.__esModule = true;\n  exports[\"default\"] = void 0;\n  var nullListeners = {\n    notify: function notify() {}\n  };\n\n  function createListenerCollection() {\n    var batch = (0, _$$_REQUIRE(_dependencyMap[0], \"./batch\").getBatch)();\n    var first = null;\n    var last = null;\n    return {\n      clear: function clear() {\n        first = null;\n        last = null;\n      },\n      notify: function notify() {\n        batch(function () {\n          var listener = first;\n\n          while (listener) {\n            listener.callback();\n            listener = listener.next;\n          }\n        });\n      },\n      get: function get() {\n        var listeners = [];\n        var listener = first;\n\n        while (listener) {\n          listeners.push(listener);\n          listener = listener.next;\n        }\n\n        return listeners;\n      },\n      subscribe: function subscribe(callback) {\n        var isSubscribed = true;\n        var listener = last = {\n          callback: callback,\n          next: null,\n          prev: last\n        };\n\n        if (listener.prev) {\n          listener.prev.next = listener;\n        } else {\n          first = listener;\n        }\n\n        return function unsubscribe() {\n          if (!isSubscribed || first === null) return;\n          isSubscribed = false;\n\n          if (listener.next) {\n            listener.next.prev = listener.prev;\n          } else {\n            last = listener.prev;\n          }\n\n          if (listener.prev) {\n            listener.prev.next = listener.next;\n          } else {\n            first = listener.next;\n          }\n        };\n      }\n    };\n  }\n\n  var Subscription = function () {\n    function Subscription(store, parentSub) {\n      this.store = store;\n      this.parentSub = parentSub;\n      this.unsubscribe = null;\n      this.listeners = nullListeners;\n      this.handleChangeWrapper = this.handleChangeWrapper.bind(this);\n    }\n\n    var _proto = Subscription.prototype;\n\n    _proto.addNestedSub = function addNestedSub(listener) {\n      this.trySubscribe();\n      return this.listeners.subscribe(listener);\n    };\n\n    _proto.notifyNestedSubs = function notifyNestedSubs() {\n      this.listeners.notify();\n    };\n\n    _proto.handleChangeWrapper = function handleChangeWrapper() {\n      if (this.onStateChange) {\n        this.onStateChange();\n      }\n    };\n\n    _proto.isSubscribed = function isSubscribed() {\n      return Boolean(this.unsubscribe);\n    };\n\n    _proto.trySubscribe = function trySubscribe() {\n      if (!this.unsubscribe) {\n        this.unsubscribe = this.parentSub ? this.parentSub.addNestedSub(this.handleChangeWrapper) : this.store.subscribe(this.handleChangeWrapper);\n        this.listeners = createListenerCollection();\n      }\n    };\n\n    _proto.tryUnsubscribe = function tryUnsubscribe() {\n      if (this.unsubscribe) {\n        this.unsubscribe();\n        this.unsubscribe = null;\n        this.listeners.clear();\n        this.listeners = nullListeners;\n      }\n    };\n\n    return Subscription;\n  }();\n\n  exports[\"default\"] = Subscription;\n});","lineCount":124,"map":[[2,0,1,0],[4,0,3,0,"exports"],[4,2,3,0,"exports"],[4,9,3,7],[4,10,3,8,"__esModule"],[4,20,3,0],[4,23,3,21],[4,27,3,0],[5,0,4,0,"exports"],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8],[5,19,4,7],[5,20,4,0],[5,23,4,21],[5,28,4,26],[5,29,4,0],[6,0,11,0],[6,6,11,4,"nullListeners"],[6,19,11,17],[6,22,11,20],[7,0,12,2,"notify"],[7,4,12,2,"notify"],[7,10,12,8],[7,12,12,10],[7,21,12,19,"notify"],[7,27,12,10],[7,30,12,28],[7,31,12,30],[8,0,11,20],[8,3,11,0],[10,0,15,0],[10,11,15,9,"createListenerCollection"],[10,35,15,0],[10,38,15,36],[11,0,16,2],[11,8,16,6,"batch"],[11,13,16,11],[11,16,16,14],[11,17,16,15],[11,20,16,18],[11,62,16,25,"getBatch"],[11,70,16,14],[11,73,16,2],[12,0,17,2],[12,8,17,6,"first"],[12,13,17,11],[12,16,17,14],[12,20,17,2],[13,0,18,2],[13,8,18,6,"last"],[13,12,18,10],[13,15,18,13],[13,19,18,2],[14,0,19,2],[14,11,19,9],[15,0,20,4,"clear"],[15,6,20,4,"clear"],[15,11,20,9],[15,13,20,11],[15,22,20,20,"clear"],[15,27,20,11],[15,30,20,28],[16,0,21,6,"first"],[16,8,21,6,"first"],[16,13,21,11],[16,16,21,14],[16,20,21,6],[17,0,22,6,"last"],[17,8,22,6,"last"],[17,12,22,10],[17,15,22,13],[17,19,22,6],[18,0,23,5],[18,7,19,9],[19,0,24,4,"notify"],[19,6,24,4,"notify"],[19,12,24,10],[19,14,24,12],[19,23,24,21,"notify"],[19,29,24,12],[19,32,24,30],[20,0,25,6,"batch"],[20,8,25,6,"batch"],[20,13,25,11],[20,14,25,12],[20,26,25,24],[21,0,26,8],[21,14,26,12,"listener"],[21,22,26,20],[21,25,26,23,"first"],[21,30,26,8],[23,0,28,8],[23,17,28,15,"listener"],[23,25,28,8],[23,27,28,25],[24,0,29,10,"listener"],[24,12,29,10,"listener"],[24,20,29,18],[24,21,29,19,"callback"],[24,29,29,10],[25,0,30,10,"listener"],[25,12,30,10,"listener"],[25,20,30,18],[25,23,30,21,"listener"],[25,31,30,29],[25,32,30,30,"next"],[25,36,30,10],[26,0,31,9],[27,0,32,7],[27,9,25,11],[27,10,25,6],[28,0,33,5],[28,7,19,9],[29,0,34,4,"get"],[29,6,34,4,"get"],[29,9,34,7],[29,11,34,9],[29,20,34,18,"get"],[29,23,34,9],[29,26,34,24],[30,0,35,6],[30,12,35,10,"listeners"],[30,21,35,19],[30,24,35,22],[30,26,35,6],[31,0,36,6],[31,12,36,10,"listener"],[31,20,36,18],[31,23,36,21,"first"],[31,28,36,6],[33,0,38,6],[33,15,38,13,"listener"],[33,23,38,6],[33,25,38,23],[34,0,39,8,"listeners"],[34,10,39,8,"listeners"],[34,19,39,17],[34,20,39,18,"push"],[34,24,39,8],[34,25,39,23,"listener"],[34,33,39,8],[35,0,40,8,"listener"],[35,10,40,8,"listener"],[35,18,40,16],[35,21,40,19,"listener"],[35,29,40,27],[35,30,40,28,"next"],[35,34,40,8],[36,0,41,7],[38,0,43,6],[38,15,43,13,"listeners"],[38,24,43,6],[39,0,44,5],[39,7,19,9],[40,0,45,4,"subscribe"],[40,6,45,4,"subscribe"],[40,15,45,13],[40,17,45,15],[40,26,45,24,"subscribe"],[40,35,45,15],[40,36,45,34,"callback"],[40,44,45,15],[40,46,45,44],[41,0,46,6],[41,12,46,10,"isSubscribed"],[41,24,46,22],[41,27,46,25],[41,31,46,6],[42,0,47,6],[42,12,47,10,"listener"],[42,20,47,18],[42,23,47,21,"last"],[42,27,47,25],[42,30,47,28],[43,0,48,8,"callback"],[43,10,48,8,"callback"],[43,18,48,16],[43,20,48,18,"callback"],[43,28,47,28],[44,0,49,8,"next"],[44,10,49,8,"next"],[44,14,49,12],[44,16,49,14],[44,20,47,28],[45,0,50,8,"prev"],[45,10,50,8,"prev"],[45,14,50,12],[45,16,50,14,"last"],[46,0,47,28],[46,9,47,6],[48,0,53,6],[48,12,53,10,"listener"],[48,20,53,18],[48,21,53,19,"prev"],[48,25,53,6],[48,27,53,25],[49,0,54,8,"listener"],[49,10,54,8,"listener"],[49,18,54,16],[49,19,54,17,"prev"],[49,23,54,8],[49,24,54,22,"next"],[49,28,54,8],[49,31,54,29,"listener"],[49,39,54,8],[50,0,55,7],[50,9,53,6],[50,15,55,13],[51,0,56,8,"first"],[51,10,56,8,"first"],[51,15,56,13],[51,18,56,16,"listener"],[51,26,56,8],[52,0,57,7],[54,0,59,6],[54,15,59,13],[54,24,59,22,"unsubscribe"],[54,35,59,13],[54,38,59,36],[55,0,60,8],[55,14,60,12],[55,15,60,13,"isSubscribed"],[55,27,60,12],[55,31,60,29,"first"],[55,36,60,34],[55,41,60,39],[55,45,60,8],[55,47,60,45],[56,0,61,8,"isSubscribed"],[56,10,61,8,"isSubscribed"],[56,22,61,20],[56,25,61,23],[56,30,61,8],[58,0,63,8],[58,14,63,12,"listener"],[58,22,63,20],[58,23,63,21,"next"],[58,27,63,8],[58,29,63,27],[59,0,64,10,"listener"],[59,12,64,10,"listener"],[59,20,64,18],[59,21,64,19,"next"],[59,25,64,10],[59,26,64,24,"prev"],[59,30,64,10],[59,33,64,31,"listener"],[59,41,64,39],[59,42,64,40,"prev"],[59,46,64,10],[60,0,65,9],[60,11,63,8],[60,17,65,15],[61,0,66,10,"last"],[61,12,66,10,"last"],[61,16,66,14],[61,19,66,17,"listener"],[61,27,66,25],[61,28,66,26,"prev"],[61,32,66,10],[62,0,67,9],[64,0,69,8],[64,14,69,12,"listener"],[64,22,69,20],[64,23,69,21,"prev"],[64,27,69,8],[64,29,69,27],[65,0,70,10,"listener"],[65,12,70,10,"listener"],[65,20,70,18],[65,21,70,19,"prev"],[65,25,70,10],[65,26,70,24,"next"],[65,30,70,10],[65,33,70,31,"listener"],[65,41,70,39],[65,42,70,40,"next"],[65,46,70,10],[66,0,71,9],[66,11,69,8],[66,17,71,15],[67,0,72,10,"first"],[67,12,72,10,"first"],[67,17,72,15],[67,20,72,18,"listener"],[67,28,72,26],[67,29,72,27,"next"],[67,33,72,10],[68,0,73,9],[69,0,74,7],[69,9,59,6],[70,0,75,5],[71,0,19,9],[71,5,19,2],[72,0,77,1],[74,0,79,0],[74,6,79,4,"Subscription"],[74,18,79,16],[74,21,79,32],[74,33,79,44],[75,0,80,2],[75,13,80,11,"Subscription"],[75,25,80,2],[75,26,80,24,"store"],[75,31,80,2],[75,33,80,31,"parentSub"],[75,42,80,2],[75,44,80,42],[76,0,81,4],[76,11,81,9,"store"],[76,16,81,4],[76,19,81,17,"store"],[76,24,81,4],[77,0,82,4],[77,11,82,9,"parentSub"],[77,20,82,4],[77,23,82,21,"parentSub"],[77,32,82,4],[78,0,83,4],[78,11,83,9,"unsubscribe"],[78,22,83,4],[78,25,83,23],[78,29,83,4],[79,0,84,4],[79,11,84,9,"listeners"],[79,20,84,4],[79,23,84,21,"nullListeners"],[79,36,84,4],[80,0,85,4],[80,11,85,9,"handleChangeWrapper"],[80,30,85,4],[80,33,85,31],[80,38,85,36,"handleChangeWrapper"],[80,57,85,31],[80,58,85,56,"bind"],[80,62,85,31],[80,63,85,61],[80,67,85,31],[80,68,85,4],[81,0,86,3],[83,0,88,2],[83,8,88,6,"_proto"],[83,14,88,12],[83,17,88,15,"Subscription"],[83,29,88,27],[83,30,88,28,"prototype"],[83,39,88,2],[85,0,90,2,"_proto"],[85,4,90,2,"_proto"],[85,10,90,8],[85,11,90,9,"addNestedSub"],[85,23,90,2],[85,26,90,24],[85,35,90,33,"addNestedSub"],[85,47,90,24],[85,48,90,46,"listener"],[85,56,90,24],[85,58,90,56],[86,0,91,4],[86,11,91,9,"trySubscribe"],[86,23,91,4],[87,0,92,4],[87,13,92,11],[87,18,92,16,"listeners"],[87,27,92,11],[87,28,92,26,"subscribe"],[87,37,92,11],[87,38,92,36,"listener"],[87,46,92,11],[87,47,92,4],[88,0,93,3],[88,5,90,2],[90,0,95,2,"_proto"],[90,4,95,2,"_proto"],[90,10,95,8],[90,11,95,9,"notifyNestedSubs"],[90,27,95,2],[90,30,95,28],[90,39,95,37,"notifyNestedSubs"],[90,55,95,28],[90,58,95,56],[91,0,96,4],[91,11,96,9,"listeners"],[91,20,96,4],[91,21,96,19,"notify"],[91,27,96,4],[92,0,97,3],[92,5,95,2],[94,0,99,2,"_proto"],[94,4,99,2,"_proto"],[94,10,99,8],[94,11,99,9,"handleChangeWrapper"],[94,30,99,2],[94,33,99,31],[94,42,99,40,"handleChangeWrapper"],[94,61,99,31],[94,64,99,62],[95,0,100,4],[95,10,100,8],[95,15,100,13,"onStateChange"],[95,28,100,4],[95,30,100,28],[96,0,101,6],[96,13,101,11,"onStateChange"],[96,26,101,6],[97,0,102,5],[98,0,103,3],[98,5,99,2],[100,0,105,2,"_proto"],[100,4,105,2,"_proto"],[100,10,105,8],[100,11,105,9,"isSubscribed"],[100,23,105,2],[100,26,105,24],[100,35,105,33,"isSubscribed"],[100,47,105,24],[100,50,105,48],[101,0,106,4],[101,13,106,11,"Boolean"],[101,20,106,18],[101,21,106,19],[101,26,106,24,"unsubscribe"],[101,37,106,18],[101,38,106,4],[102,0,107,3],[102,5,105,2],[104,0,109,2,"_proto"],[104,4,109,2,"_proto"],[104,10,109,8],[104,11,109,9,"trySubscribe"],[104,23,109,2],[104,26,109,24],[104,35,109,33,"trySubscribe"],[104,47,109,24],[104,50,109,48],[105,0,110,4],[105,10,110,8],[105,11,110,9],[105,16,110,14,"unsubscribe"],[105,27,110,4],[105,29,110,27],[106,0,111,6],[106,13,111,11,"unsubscribe"],[106,24,111,6],[106,27,111,25],[106,32,111,30,"parentSub"],[106,41,111,25],[106,44,111,42],[106,49,111,47,"parentSub"],[106,58,111,42],[106,59,111,57,"addNestedSub"],[106,71,111,42],[106,72,111,70],[106,77,111,75,"handleChangeWrapper"],[106,96,111,42],[106,97,111,25],[106,100,111,98],[106,105,111,103,"store"],[106,110,111,98],[106,111,111,109,"subscribe"],[106,120,111,98],[106,121,111,119],[106,126,111,124,"handleChangeWrapper"],[106,145,111,98],[106,146,111,6],[107,0,112,6],[107,13,112,11,"listeners"],[107,22,112,6],[107,25,112,23,"createListenerCollection"],[107,49,112,47],[107,51,112,6],[108,0,113,5],[109,0,114,3],[109,5,109,2],[111,0,116,2,"_proto"],[111,4,116,2,"_proto"],[111,10,116,8],[111,11,116,9,"tryUnsubscribe"],[111,25,116,2],[111,28,116,26],[111,37,116,35,"tryUnsubscribe"],[111,51,116,26],[111,54,116,52],[112,0,117,4],[112,10,117,8],[112,15,117,13,"unsubscribe"],[112,26,117,4],[112,28,117,26],[113,0,118,6],[113,13,118,11,"unsubscribe"],[113,24,118,6],[114,0,119,6],[114,13,119,11,"unsubscribe"],[114,24,119,6],[114,27,119,25],[114,31,119,6],[115,0,120,6],[115,13,120,11,"listeners"],[115,22,120,6],[115,23,120,21,"clear"],[115,28,120,6],[116,0,121,6],[116,13,121,11,"listeners"],[116,22,121,6],[116,25,121,23,"nullListeners"],[116,38,121,6],[117,0,122,5],[118,0,123,3],[118,5,116,2],[120,0,125,2],[120,11,125,9,"Subscription"],[120,23,125,2],[121,0,126,1],[121,3,79,32],[121,5,79,0],[123,0,128,0,"exports"],[123,2,128,0,"exports"],[123,9,128,7],[123,10,128,8],[123,19,128,7],[123,20,128,0],[123,23,128,21,"Subscription"],[123,35,128,0]],"functionMap":{"names":["<global>","notify","createListenerCollection","clear","batch$argument_0","get","subscribe","unsubscribe","<anonymous>","Subscription","addNestedSub","notifyNestedSubs","handleChangeWrapper","isSubscribed","trySubscribe","tryUnsubscribe"],"mappings":"AAA;UCW,oBD;AEG;WCK;KDG;YDC;YGC;OHO;KCC;SGC;KHU;eIC;aCc;ODe;KJC;CFE;gCQE;ECC;GDM;wBEI;GFG;4BGE;GHE;+BIE;GJI;wBKE;GLE;wBME;GNK;0BOE;GPO;CRG"}},"type":"js/module"}]}