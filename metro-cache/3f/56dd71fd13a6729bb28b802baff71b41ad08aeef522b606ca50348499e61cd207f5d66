{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":11,"column":0},"end":{"line":11,"column":42}}]}},{"name":"../core/AnimatedClock","data":{"asyncType":null,"locs":[{"start":{"line":11,"column":0},"end":{"line":11,"column":42}}]}},{"name":"../derived/evaluateOnce","data":{"asyncType":null,"locs":[{"start":{"line":40,"column":6},"end":{"line":40,"column":18},"identifierName":"evaluateOnce"},{"start":{"line":92,"column":6},"end":{"line":92,"column":18},"identifierName":"evaluateOnce"}]}},{"name":"../base","data":{"asyncType":null,"locs":[{"start":{"line":41,"column":8},"end":{"line":41,"column":11},"identifierName":"set"},{"start":{"line":44,"column":23},"end":{"line":44,"column":29},"identifierName":"always"},{"start":{"line":45,"column":12},"end":{"line":45,"column":15},"identifierName":"set"},{"start":{"line":47,"column":14},"end":{"line":47,"column":19},"identifierName":"block"},{"start":{"line":48,"column":16},"end":{"line":48,"column":20},"identifierName":"cond"},{"start":{"line":48,"column":21},"end":{"line":48,"column":33},"identifierName":"clockRunning"},{"start":{"line":48,"column":48},"end":{"line":48,"column":58},"identifierName":"startClock"},{"start":{"line":50,"column":16},"end":{"line":50,"column":20},"identifierName":"cond"},{"start":{"line":51,"column":18},"end":{"line":51,"column":22},"identifierName":"call"},{"start":{"line":62,"column":18},"end":{"line":62,"column":27},"identifierName":"stopClock"},{"start":{"line":92,"column":19},"end":{"line":92,"column":22},"identifierName":"set"}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = backwardsCompatibleAnimWrapper;\n\n  var _AnimatedClock = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[1], \"../core/AnimatedClock\"));\n\n  function createOldAnimationObject(node, animationStateDefaults, value, config) {\n    var newClock = new _AnimatedClock.default();\n    var currentState = animationStateDefaults();\n    var alwaysNode;\n    var isStarted = false;\n    var isDone = false;\n    var wasStopped = false;\n    var animationCallback;\n    var animation = {\n      start: function start(currentAnimationCallback) {\n        animationCallback = currentAnimationCallback;\n\n        if (isStarted) {\n          animationCallback && animationCallback({\n            finished: false\n          });\n          return;\n        }\n\n        if (isDone) {\n          console.warn('Animation has been finished before');\n          return;\n        }\n\n        if (!value.isNativelyInitialized()) {\n          return;\n        }\n\n        isStarted = true;\n        (0, _$$_REQUIRE(_dependencyMap[2], \"../derived/evaluateOnce\").evaluateOnce)((0, _$$_REQUIRE(_dependencyMap[3], \"../base\").set)(currentState.position, value), currentState.position, function () {\n          alwaysNode = (0, _$$_REQUIRE(_dependencyMap[3], \"../base\").always)((0, _$$_REQUIRE(_dependencyMap[3], \"../base\").set)(value, (0, _$$_REQUIRE(_dependencyMap[3], \"../base\").block)([(0, _$$_REQUIRE(_dependencyMap[3], \"../base\").cond)((0, _$$_REQUIRE(_dependencyMap[3], \"../base\").clockRunning)(newClock), 0, (0, _$$_REQUIRE(_dependencyMap[3], \"../base\").startClock)(newClock)), node(newClock, currentState, config), (0, _$$_REQUIRE(_dependencyMap[3], \"../base\").cond)(currentState.finished, [(0, _$$_REQUIRE(_dependencyMap[3], \"../base\").call)([], function () {\n            isStarted = false;\n\n            if (!wasStopped) {\n              isDone = true;\n            }\n\n            value.__detachAnimation(animation);\n\n            isDone = true;\n\n            if (!wasStopped) {\n              wasStopped = false;\n            }\n          }), (0, _$$_REQUIRE(_dependencyMap[3], \"../base\").stopClock)(newClock)]), currentState.position])));\n\n          value.__attachAnimation(animation);\n\n          alwaysNode.__addChild(value);\n        });\n      },\n      __detach: function __detach() {\n        animationCallback && animationCallback({\n          finished: isDone\n        });\n        animationCallback = null;\n        value.__initialized && alwaysNode.__removeChild(value);\n      },\n      stop: function stop() {\n        if (isDone) {\n          console.warn('Calling stop has no effect as the animation has already completed');\n          return;\n        }\n\n        if (!isStarted) {\n          console.warn(\"Calling stop has no effect as the animation hasn't been started\");\n          return;\n        }\n\n        wasStopped = true;\n        (0, _$$_REQUIRE(_dependencyMap[2], \"../derived/evaluateOnce\").evaluateOnce)((0, _$$_REQUIRE(_dependencyMap[3], \"../base\").set)(currentState.finished, 1), currentState.finished);\n      },\n      __stopImmediately_testOnly: function __stopImmediately_testOnly(result) {\n        animation.stop();\n        isDone = result;\n\n        value.__detachAnimation(animation);\n      }\n    };\n    return animation;\n  }\n\n  function backwardsCompatibleAnimWrapper(node, animationStateDefaults) {\n    return function (clock, state, config) {\n      if (config !== undefined) {\n        return node(clock, state, config);\n      }\n\n      return createOldAnimationObject(node, animationStateDefaults, clock, state);\n    };\n  }\n});","lineCount":100,"map":[[7,0,11,0],[9,0,14,0],[9,11,14,9,"createOldAnimationObject"],[9,35,14,0],[9,36,14,34,"node"],[9,40,14,0],[9,42,14,40,"animationStateDefaults"],[9,64,14,0],[9,66,14,64,"value"],[9,71,14,0],[9,73,14,71,"config"],[9,79,14,0],[9,81,14,79],[10,0,15,2],[10,8,15,8,"newClock"],[10,16,15,16],[10,19,15,19],[10,23,15,23,"Clock"],[10,45,15,19],[10,47,15,2],[11,0,16,2],[11,8,16,8,"currentState"],[11,20,16,20],[11,23,16,23,"animationStateDefaults"],[11,45,16,45],[11,47,16,2],[12,0,17,2],[12,8,17,6,"alwaysNode"],[12,18,17,2],[13,0,18,2],[13,8,18,6,"isStarted"],[13,17,18,15],[13,20,18,18],[13,25,18,2],[14,0,19,2],[14,8,19,6,"isDone"],[14,14,19,12],[14,17,19,15],[14,22,19,2],[15,0,20,2],[15,8,20,6,"wasStopped"],[15,18,20,16],[15,21,20,19],[15,26,20,2],[16,0,21,2],[16,8,21,6,"animationCallback"],[16,25,21,2],[17,0,22,2],[17,8,22,8,"animation"],[17,17,22,17],[17,20,22,20],[18,0,23,4,"start"],[18,6,23,4,"start"],[18,11,23,9],[18,13,23,11],[18,28,23,12,"currentAnimationCallback"],[18,52,23,11],[18,54,23,41],[19,0,24,6,"animationCallback"],[19,8,24,6,"animationCallback"],[19,25,24,23],[19,28,24,26,"currentAnimationCallback"],[19,52,24,6],[21,0,25,6],[21,12,25,10,"isStarted"],[21,21,25,6],[21,23,25,21],[22,0,26,8,"animationCallback"],[22,10,26,8,"animationCallback"],[22,27,26,25],[22,31,26,29,"animationCallback"],[22,48,26,46],[22,49,26,47],[23,0,26,49,"finished"],[23,12,26,49,"finished"],[23,20,26,57],[23,22,26,59],[24,0,26,47],[24,11,26,46],[24,12,26,8],[25,0,27,8],[26,0,28,7],[28,0,29,6],[28,12,29,10,"isDone"],[28,18,29,6],[28,20,29,18],[29,0,30,8,"console"],[29,10,30,8,"console"],[29,17,30,15],[29,18,30,16,"warn"],[29,22,30,8],[29,23,30,21],[29,59,30,8],[30,0,32,8],[31,0,33,7],[33,0,35,6],[33,12,35,10],[33,13,35,11,"value"],[33,18,35,16],[33,19,35,17,"isNativelyInitialized"],[33,40,35,11],[33,42,35,6],[33,44,35,42],[34,0,36,8],[35,0,37,7],[37,0,39,6,"isStarted"],[37,8,39,6,"isStarted"],[37,17,39,15],[37,20,39,18],[37,24,39,6],[38,0,40,6],[38,84,41,8],[38,135,41,12,"currentState"],[38,147,41,24],[38,148,41,25,"position"],[38,156,41,8],[38,158,41,35,"value"],[38,163,41,8],[38,164,40,6],[38,166,42,8,"currentState"],[38,178,42,20],[38,179,42,21,"position"],[38,187,40,6],[38,189,43,8],[38,201,43,14],[39,0,44,10,"alwaysNode"],[39,10,44,10,"alwaysNode"],[39,20,44,20],[39,23,44,23],[39,77,45,12],[39,128,46,14,"value"],[39,133,45,12],[39,135,47,14],[39,188,47,20],[39,189,48,16],[39,241,48,21],[39,301,48,34,"newClock"],[39,309,48,21],[39,310,48,16],[39,312,48,45],[39,313,48,16],[39,315,48,48],[39,373,48,59,"newClock"],[39,381,48,48],[39,382,48,16],[39,383,47,20],[39,385,49,16,"node"],[39,389,49,20],[39,390,49,21,"newClock"],[39,398,49,20],[39,400,49,31,"currentState"],[39,412,49,20],[39,414,49,45,"config"],[39,420,49,20],[39,421,47,20],[39,423,50,16],[39,475,50,21,"currentState"],[39,487,50,33],[39,488,50,34,"finished"],[39,496,50,16],[39,498,50,44],[39,499,51,18],[39,551,51,23],[39,553,51,18],[39,555,51,27],[39,567,51,33],[40,0,52,20,"isStarted"],[40,12,52,20,"isStarted"],[40,21,52,29],[40,24,52,32],[40,29,52,20],[42,0,53,20],[42,16,53,24],[42,17,53,25,"wasStopped"],[42,27,53,20],[42,29,53,37],[43,0,54,22,"isDone"],[43,14,54,22,"isDone"],[43,20,54,28],[43,23,54,31],[43,27,54,22],[44,0,55,21],[46,0,56,20,"value"],[46,12,56,20,"value"],[46,17,56,25],[46,18,56,26,"__detachAnimation"],[46,35,56,20],[46,36,56,44,"animation"],[46,45,56,20],[48,0,57,20,"isDone"],[48,12,57,20,"isDone"],[48,18,57,26],[48,21,57,29],[48,25,57,20],[50,0,58,20],[50,16,58,24],[50,17,58,25,"wasStopped"],[50,27,58,20],[50,29,58,37],[51,0,59,22,"wasStopped"],[51,14,59,22,"wasStopped"],[51,24,59,32],[51,27,59,35],[51,32,59,22],[52,0,60,21],[53,0,61,19],[53,11,51,18],[53,12,50,44],[53,14,62,18],[53,71,62,28,"newClock"],[53,79,62,18],[53,80,50,44],[53,81,50,16],[53,82,47,20],[53,84,64,16,"currentState"],[53,96,64,28],[53,97,64,29,"position"],[53,105,47,20],[53,106,47,14],[53,107,45,12],[53,108,44,23],[53,109,44,10],[55,0,68,10,"value"],[55,10,68,10,"value"],[55,15,68,15],[55,16,68,16,"__attachAnimation"],[55,33,68,10],[55,34,68,34,"animation"],[55,43,68,10],[57,0,69,10,"alwaysNode"],[57,10,69,10,"alwaysNode"],[57,20,69,20],[57,21,69,21,"__addChild"],[57,31,69,10],[57,32,69,32,"value"],[57,37,69,10],[58,0,70,9],[58,9,40,6],[59,0,72,5],[59,7,22,20],[60,0,73,4,"__detach"],[60,6,73,4,"__detach"],[60,14,73,12],[60,16,73,14],[60,36,73,20],[61,0,74,6,"animationCallback"],[61,8,74,6,"animationCallback"],[61,25,74,23],[61,29,74,27,"animationCallback"],[61,46,74,44],[61,47,74,45],[62,0,74,47,"finished"],[62,10,74,47,"finished"],[62,18,74,55],[62,20,74,57,"isDone"],[63,0,74,45],[63,9,74,44],[63,10,74,6],[64,0,75,6,"animationCallback"],[64,8,75,6,"animationCallback"],[64,25,75,23],[64,28,75,26],[64,32,75,6],[65,0,76,6,"value"],[65,8,76,6,"value"],[65,13,76,11],[65,14,76,12,"__initialized"],[65,27,76,6],[65,31,76,29,"alwaysNode"],[65,41,76,39],[65,42,76,40,"__removeChild"],[65,55,76,29],[65,56,76,54,"value"],[65,61,76,29],[65,62,76,6],[66,0,77,5],[66,7,22,20],[67,0,78,4,"stop"],[67,6,78,4,"stop"],[67,10,78,8],[67,12,78,10],[67,28,78,16],[68,0,79,6],[68,12,79,10,"isDone"],[68,18,79,6],[68,20,79,18],[69,0,80,8,"console"],[69,10,80,8,"console"],[69,17,80,15],[69,18,80,16,"warn"],[69,22,80,8],[69,23,81,10],[69,90,80,8],[70,0,83,8],[71,0,84,7],[73,0,85,6],[73,12,85,10],[73,13,85,11,"isStarted"],[73,22,85,6],[73,24,85,22],[74,0,86,8,"console"],[74,10,86,8,"console"],[74,17,86,15],[74,18,86,16,"warn"],[74,22,86,8],[74,23,87,10],[74,88,86,8],[75,0,89,8],[76,0,90,7],[78,0,91,6,"wasStopped"],[78,8,91,6,"wasStopped"],[78,18,91,16],[78,21,91,19],[78,25,91,6],[79,0,92,6],[79,84,92,19],[79,135,92,23,"currentState"],[79,147,92,35],[79,148,92,36,"finished"],[79,156,92,19],[79,158,92,46],[79,159,92,19],[79,160,92,6],[79,162,92,50,"currentState"],[79,174,92,62],[79,175,92,63,"finished"],[79,183,92,6],[80,0,93,5],[80,7,22,20],[81,0,94,4,"__stopImmediately_testOnly"],[81,6,94,4,"__stopImmediately_testOnly"],[81,32,94,30],[81,34,94,32],[81,70,94,33,"result"],[81,76,94,32],[81,78,94,44],[82,0,95,6,"animation"],[82,8,95,6,"animation"],[82,17,95,15],[82,18,95,16,"stop"],[82,22,95,6],[83,0,96,6,"isDone"],[83,8,96,6,"isDone"],[83,14,96,12],[83,17,96,15,"result"],[83,23,96,6],[85,0,97,6,"value"],[85,8,97,6,"value"],[85,13,97,11],[85,14,97,12,"__detachAnimation"],[85,31,97,6],[85,32,97,30,"animation"],[85,41,97,6],[86,0,98,5],[87,0,22,20],[87,5,22,2],[88,0,100,2],[88,11,100,9,"animation"],[88,20,100,2],[89,0,101,1],[91,0,107,15],[91,11,107,24,"backwardsCompatibleAnimWrapper"],[91,41,107,15],[91,42,108,2,"node"],[91,46,107,15],[91,48,109,2,"animationStateDefaults"],[91,70,107,15],[91,72,110,2],[92,0,111,2],[92,11,111,9],[92,21,111,10,"clock"],[92,26,111,9],[92,28,111,17,"state"],[92,33,111,9],[92,35,111,24,"config"],[92,41,111,9],[92,43,111,35],[93,0,112,4],[93,10,112,8,"config"],[93,16,112,14],[93,21,112,19,"undefined"],[93,30,112,4],[93,32,112,30],[94,0,113,6],[94,15,113,13,"node"],[94,19,113,17],[94,20,113,18,"clock"],[94,25,113,17],[94,27,113,25,"state"],[94,32,113,17],[94,34,113,32,"config"],[94,40,113,17],[94,41,113,6],[95,0,114,5],[97,0,115,4],[97,13,115,11,"createOldAnimationObject"],[97,37,115,35],[97,38,115,36,"node"],[97,42,115,35],[97,44,115,42,"animationStateDefaults"],[97,66,115,35],[97,68,115,66,"clock"],[97,73,115,35],[97,75,115,73,"state"],[97,80,115,35],[97,81,115,4],[98,0,116,3],[98,5,111,2],[99,0,117,1]],"functionMap":{"names":["<global>","createOldAnimationObject","animation.start","evaluateOnce$argument_2","call$argument_1","animation.__detach","animation.stop","animation.__stopImmediately_testOnly","backwardsCompatibleAnimWrapper","<anonymous>"],"mappings":"AAA;ACa;WCS;QCoB;2BCQ;mBDU;SDS;KDE;cIC;KJI;UKC;KLe;gCMC;KNI;CDG;eQM;SCI;GDK;CRC"}},"type":"js/module"}]}